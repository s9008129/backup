# 簡易差異備份工具 - 操作指南

> 💡 **給非技術人員的指南**  
> 這份文件用簡單的語言解釋如何使用備份工具，不需要任何技術背景。

---

## 📖 目錄

1. [軟體是做什麼的？](#軟體是做什麼的)
2. [安裝和啟動](#安裝和啟動)
3. [首次備份](#首次備份)
4. [日常備份](#日常備份)
5. [恢復檔案](#恢復檔案)
6. [常見問題](#常見問題)

---

## 軟體是做什麼的？

這個「簡易差異備份工具」是一個**自動同步備份軟體**，作用是：

- 🛡️ **保護您的檔案** - 定期將重要檔案複製到外接硬碟
- ⚡ **節省時間和空間** - 只備份新增或修改的檔案，也同步刪除已刪除的檔案
- 🔄 **快速恢復** - 當檔案意外刪除或損毀時，輕鬆恢復
- 🔁 **完全同步** - 備份與源資料夾內容完全一致

### 為什麼需要備份？

- 防止硬碟損壞導致資料丟失
- 防止病毒或勒索軟體破壞檔案
- 防止誤刪重要檔案

---

## 安裝和啟動

### 準備工作

您需要：
1. **一台 Windows 11 電腦**
2. **一個外接硬碟**（用來存放備份）
3. **Python 環境**（已安裝 Conda）

### 第一步：準備虛擬環境

打開「命令提示字元」或「PowerShell」，執行：

```
conda activate backup
```

您會看到命令行最左邊出現 `(backup)` 標記，表示環境已啟動。

### 第二步：啟動軟體

執行：

```
python src/backup_tool.py
```

會看到軟體的視窗介面，有幾個按鈕和選項。

---

## 首次備份

### 步驟 1：選擇要備份的資料夾

1. 點擊「選擇來源」按鈕
2. 選擇您要備份的資料夾（例如：`C:\Users\您的用戶名\Documents`）
3. 點擊「確認」

**提示**：您可以選擇：
- 單一資料夾（如：我的文件）
- 整個磁碟區（如：D:\）
- 多個小資料夾

### 步驟 2：選擇備份目的地

1. 將外接硬碟連接到電腦
2. 點擊「選擇目的地」按鈕
3. 選擇外接硬碟上的資料夾（或建立新資料夾用於備份）
4. 點擊「確認」

**重要**：確保外接硬碟有足夠的空間（至少是要備份檔案大小的 1.5 倍）。

### 步驟 3：開始備份

1. 點擊「開始備份」按鈕
2. 軟體會：
   - 掃描所有要備份的檔案
   - 計算有多少檔案需要複製
   - 開始複製（會顯示進度百分比）
   - 驗證所有檔案都正確複製

3. 完成後會顯示「✅ 備份完成」的訊息

**備份時間**：取決於檔案數量和大小，通常：
- 1,000 個檔案（共 10GB）：約 5-10 分鐘
- 10,000 個檔案（共 100GB）：約 30-60 分鐘

### 步驟 4：查看備份結果

備份完成後，軟體會顯示：
- ✅ 備份成功的檔案數量
- ✅ 備份的總大小
- ✅ 備份完成時間
- ✅ 是否有任何錯誤檔案

---

## 日常備份

### 第二次及之後的備份

當您有新檔案、修改或刪除檔案後，軟體會**自動偵測並同步**：

1. **新增的檔案** - 軟體會複製新檔案
2. **修改的檔案** - 軟體只更新修改過的檔案
3. **已刪除的檔案** - 軟體也會刪除備份中的檔案（同步策略）

### 優勢

這叫做「**差異同步備份**」，好處是：

- ⚡ **速度快** - 只備份新增/修改的，不重複備份
- 💾 **節省空間** - 不浪費備份硬碟空間
- ⏱️ **節省時間** - 完成更快（通常只需 1-5 分鐘）
- 🔁 **完全同步** - 備份與源完全一致，無過期檔案

### 建議頻率

- 👤 **個人用戶**：每週備份一次（或工作結束時）
- 💼 **工作用戶**：每天備份一次（工作開始或結束時）
- 🎯 **重要時刻**：編輯重要檔案後立即備份

---

## 恢復檔案

### 情況 1：意外刪除了檔案

1. 執行軟體：`python src/backup_tool.py`
2. 點擊「恢復」標籤/按鈕
3. 選擇備份資料夾（通常在外接硬碟上）
4. 軟體會列出備份中的所有檔案和資料夾
5. 勾選要恢復的檔案或資料夾
6. 點擊「恢復到」按鈕
7. 選擇要恢復的位置（通常是原始位置）
8. 點擊「確認」

### 情況 2：檔案被損毀

1. 按照上面的步驟恢復最新的備份版本
2. 如果最新備份也有問題，可以檢查是否有較舊的備份版本

### 情況 3：硬碟故障

1. 更換新硬碟
2. 重新安裝 Windows 和應用程序
3. 使用備份外接硬碟執行「恢復」程序

---

## 🔒 可靠性提醒（Phase 1+2 改善）

### ✅ Phase 1: 備份驗證層級

軟體已實施的備份驗證檢查：

#### 1️⃣ 備份完整性檢查
- **作用**：備份前驗證備份是否完整
- **表現**：如果檢測到備份不完整，會顯示警告訊息
- **您應該**：按照提示操作，通常會執行完整重新備份

#### 2️⃣ 來源資料夾驗證
- **作用**：防止誤同步到錯誤的資料夾
- **表現**：如果發現備份來源已改變，會要求確認
- **您應該**：確認新的來源資料夾無誤後再繼續

#### 3️⃣ 磁碟空間預檢查
- **作用**：備份前確認外接硬碟有足夠空間
- **表現**：空間不足時會中止備份並提示
- **您應該**：清理外接硬碟上的不需要的檔案後再試

#### 4️⃣ 備份記錄原子性保護
- **作用**：確保備份記錄不會損毀
- **表現**：即使中途中斷，備份記錄也能保持完整
- **您應該**：放心進行備份，中途中斷後可安心恢復

### ✅ Phase 2: 備份執行和恢復層級

#### 5️⃣ 備份狀態鎖定
- **作用**：防止同時執行多個備份
- **表現**：點擊「開始備份」時，系統檢查是否已在進行中
- **您應該**：如果看到「備份進行中」提示，請稍候片刻後重試

#### 6️⃣ 詳細失敗報告
- **作用**：清楚地顯示每個失敗檔案的原因
- **表現**：備份完成時顯示失敗檔案清單和具體錯誤
- **您應該**：了解失敗原因（如檔案被鎖定），下次備份時解決問題

#### 7️⃣ 備份復原模式
- **作用**：備份中斷時自動復原 manifest（備份記錄）
- **表現**：失敗時自動掃描實際備份並同步記錄
- **您應該**：中斷後重新運行備份，系統自動恢復並繼續

### 💡 建議做法

1. ✅ **定期驗證備份** - 定期檢查備份資料夾確認完整
2. ✅ **及時清理硬碟** - 保持外接硬碟有充足空間
3. ✅ **注意失敗提示** - 失敗檔案會清楚顯示原因
4. ✅ **安心中止備份** - 即使中途停止，系統也能自動恢復
5. ✅ **多份備份** - 重要資料保留 2+ 個備份副本
6. ✅ **單次執行備份** - 不要同時點擊多次「開始備份」

---

## 常見問題

### ❓ Q1: 備份時軟體崩潰了，怎麼辦？

**A:** 不用擔心！按照以下步驟：

1. 重新啟動軟體
2. 再次執行備份
3. 軟體會自動檢測已備份的檔案，只複製未完成的部分
4. 無需重新開始整個過程

### ❓ Q2: 備份需要多長時間？

**A:** 取決於檔案數量和大小：

| 檔案大小 | 估計時間 |
|---------|---------|
| 1-10 GB | 5-15 分鐘 |
| 10-50 GB | 15-45 分鐘 |
| 50-100 GB | 45-120 分鐘 |

> 💡 **提示**：這只是估計值，實際時間因硬碟速度而異。

### ❓ Q3: 可以同時備份多個資料夾嗎？

**A:** 一次備份只能備份一個資料夾。要備份多個資料夾：

- 方法 1：重複執行備份（每次選擇不同資料夾）
- 方法 2：將多個資料夾移到一個「備份」資料夾，然後備份這個資料夾

### ❓ Q4: 備份可以刪除嗎？

**A:** 可以，但要小心：

1. ✅ 可以刪除不需要的舊備份檔案
2. ⚠️ 不要刪除「.backup_manifest」檔案（這是備份記錄）
3. ⚠️ 刪除後無法復原，請確定真的不需要

### ❓ Q5: 如何確認備份成功？

**A:** 軟體會在完成後顯示：

- ✅ 備份完成的訊息
- ✅ 備份檔案數量和大小
- ✅ 錯誤或警告（如有）

您也可以：
1. 打開備份資料夾（外接硬碟）
2. 確認看到已複製的檔案和資料夾
3. 隨意打開備份中的檔案，確認內容完整

### ❓ Q6: 外接硬碟滿了怎麼辦？

**A:** 您需要：

1. 購買更大的外接硬碟，或
2. 刪除不需要的舊備份，或
3. 備份到多個外接硬碟（輪流使用）

### ❓ Q7: 能否備份到網路硬碟或雲端？

**A:** 不建議：

- ❌ 網路硬碟：可能太慢或不穩定
- ❌ 雲端服務（如 OneDrive）：可能受限於網路速度和額度

✅ 建議：使用**本地外接硬碟**（USB 硬碟或 SSD）

---

## 💡 最佳實踐

### ✅ 應該做

1. ✅ **定期備份** - 設定每週或每天自動提醒
2. ✅ **多地保管** - 至少保留 2 個備份副本（主要+備用）
3. ✅ **驗證備份** - 定期檢查備份檔案是否完整
4. ✅ **保持硬碟健康** - 讓外接硬碟通風散熱

### ❌ 不應該做

1. ❌ **依賴單一備份** - 硬碟會損壞，要有備用
2. ❌ **忘記備份** - 定期備份才有保障
3. ❌ **立即覆蓋** - 備份新版本前保留舊版本
4. ❌ **僅在故障時才備份** - 應該定期預防性備份

---

## 🆘 需要幫助？

如果遇到問題，請檢查：

1. **外接硬碟是否連接？**
   - 打開「檔案總管」檢查硬碟是否顯示
   - 確保硬碟有足夠空間

2. **是否有檔案被鎖定？**
   - 某些在執行中的軟體使用的檔案無法複製
   - 關閉這些軟體後重試

3. **來源資料夾是否正確？**
   - 確認選擇的資料夾路徑正確
   - 確認有讀取權限

4. **查看詳細日誌**
   - 在 `~\.backup_tool\history.json` 檔案中
   - 顯示每次備份的詳細信息和任何錯誤

---

**版本**: v1.0  
**最後更新**: 2026-01-30

有任何建議或問題，歡迎反饋！
